<p class="text-justify">
    This is an addon for Godot 4.4+ that adds the <strong>SharedMemory</strong> class for creating, opening and directly accessing shared memory segments for <strong>inter-process communication (IPC)</strong>.
</p>

<h2>
    Description
</h2>

<p class="text-justify">
    <strong>SharedMemory</strong> is an IPC mechanism that lets two or more processes access the same memory segment concurrently. A segment created by one process can be read and written by other processes. Any change becomes immediately visible to all processes that share the segment.
</p>
<p class="text-justify">
    <strong>Note: SharedMemory</strong> does not provide synchronization methods or automatic cleanup. You must synchronize concurrent access to prevent race conditions.
</p>

<h2>
    How to use
</h2>

<h4>
    Write (Godot → Python):
</h4>

<pre><code style="font-family:monospace; font-size:12px;"><span style="color:#ffffff80;"># Godot Shared Memory Example.</span>
<span style="color:#ff7085;">extends</span> <span style="color:#8fffdb;">Node</span>

<span style="color:#ff7085;">const</span> <span style="color:#bce0ff;">NAME</span> <span style="color:#abc9ff;">:</span> <span style="color:#42ffc2;">String</span> <span style="color:#abc9ff;">=</span> <span style="color:#ffeda1;">"SharedMemoryExample"</span>
<span style="color:#ff7085;">const</span> <span style="color:#bce0ff;">SIZE</span> <span style="color:#abc9ff;">:</span> <span style="color:#42ffc2;">int</span> <span style="color:#abc9ff;">=</span> <span style="color:#a1ffe0;">1024</span>

<span style="color:#ff7085;">func</span> <span style="color:#66e6ff;">_ready</span><span style="color:#abc9ff;">()</span> <span style="color:#abc9ff;">-></span> <span style="color:#42ffc2;">void</span><span style="color:#abc9ff;">:</span>
	<span style="color:#ff7085;">var</span> <span style="color:#ffffffbf;">shm</span> <span style="color:#abc9ff;">:</span> <span style="color:#c7ffed;">SharedMemory</span> <span style="color:#abc9ff;">=</span> <span style="color:#c7ffed;">SharedMemory</span><span style="color:#abc9ff;">.</span><span style="color:#57b3ff;">new</span><span style="color:#abc9ff;">()</span>
	<span style="color:#ff8ccc;">if</span> <span style="color:#ffffffbf;">shm</span><span style="color:#abc9ff;">.</span><span style="color:#57b3ff;">create</span><span style="color:#abc9ff;">(</span><span style="color:#bce0ff;">NAME</span><span style="color:#abc9ff;">,</span> <span style="color:#bce0ff;">SIZE</span><span style="color:#abc9ff;">,</span> <span style="color:#c7ffed;">SharedMemory</span><span style="color:#abc9ff;">.</span><span style="color:#bce0ff;">LOCAL_SCOPE</span><span style="color:#abc9ff;">)</span> <span style="color:#abc9ff;">==</span> <span style="color:#ffffffbf;">OK</span><span style="color:#abc9ff;">:</span>
		<span style="color:#ffffffbf;">shm</span><span style="color:#abc9ff;">.</span><span style="color:#57b3ff;">write</span><span style="color:#abc9ff;">((</span><span style="color:#ffeda1;">"Hello world from Godot Shared Memory!"</span><span style="color:#abc9ff;">).</span><span style="color:#57b3ff;">to_utf8_buffer</span><span style="color:#abc9ff;">())</span>

	<span style="color:#ff7085;">await</span> <span style="color:#57b3ff;">get_tree</span><span style="color:#abc9ff;">().</span><span style="color:#57b3ff;">create_timer</span><span style="color:#abc9ff;">(</span><span style="color:#a1ffe0;">10</span><span style="color:#abc9ff;">).</span><span style="color:#bce0ff;">timeout</span>

	<span style="color:#ffffffbf;">shm</span><span style="color:#abc9ff;">.</span><span style="color:#57b3ff;">close</span><span style="color:#abc9ff;">()</span>
	<span style="color:#ffffffbf;">shm</span><span style="color:#abc9ff;">.</span><span style="color:#57b3ff;">unlink</span><span style="color:#abc9ff;">()</span>
</code></pre>

<h4>
    Read (Python):
</h4>

<pre><code style="font-family:monospace; font-size:12px;"><span style="color:#6a9955;"># Python Shared Memory Example.</span>
<span style="color:#c586c0;">from</span> <span style="color:#4ec9b0;">multiprocessing</span> <span style="color:#c586c0;">import</span> <span style="color:#4ec9b0;">shared_memory</span>
<span style="color:#c586c0;">from</span> <span style="color:#4ec9b0;">multiprocessing</span> <span style="color:#c586c0;">import</span> <span style="color:#4ec9b0;">resource_tracker</span>

<span style="color:#4fc1ff;">NAME</span> <span style="color:#cccccc;">:</span> <span style="color:#4ec9b0;">str</span> <span style="color:#d4d4d4;">=</span> <span style="color:#ce9178;">"SharedMemoryExample"</span>
<span style="color:#4fc1ff;">SIZE</span> <span style="color:#cccccc;">:</span> <span style="color:#4ec9b0;">int</span> <span style="color:#d4d4d4;">=</span> <span style="color:#b5cea8;">1024</span>

<span style="color:#569cd6;">def</span> <span style="color:#dcdcaa;">main</span><span style="color:#ffd700;">()</span> <span style="color:#cccccc;">-></span> <span style="color:#569cd6;">None</span><span style="color:#cccccc;">:</span>
	<span style="color:#9cdcfe;">shm</span> <span style="color:#cccccc;">:</span> <span style="color:#4ec9b0;">shared_memory</span><span style="color:#cccccc;">.</span><span style="color:#4ec9b0;">SharedMemory</span> <span style="color:#d4d4d4;">=</span> <span style="color:#4ec9b0;">shared_memory</span><span style="color:#cccccc;">.</span><span style="color:#4ec9b0;">SharedMemory</span><span style="color:#ffd700;">(</span><span style="color:#9cdcfe;">name</span><span style="color:#d4d4d4;">=</span><span style="color:#4fc1ff;">NAME</span><span style="color:#cccccc;">,</span> <span style="color:#9cdcfe;">create</span><span style="color:#d4d4d4;">=</span><span style="color:#569cd6;">False</span><span style="color:#cccccc;">,</span> <span style="color:#9cdcfe;">size</span><span style="color:#d4d4d4;">=</span><span style="color:#4fc1ff;">SIZE</span><span style="color:#ffd700;">)</span>

	<span style="color:#4ec9b0;">resource_tracker</span><span style="color:#cccccc;">.</span><span style="color:#9cdcfe;">unregister</span><span style="color:#ffd700;">(</span><span style="color:#9cdcfe;">shm</span><span style="color:#cccccc;">._name,</span> <span style="color:#ce9178;">'shared_memory'</span><span style="color:#ffd700;">)</span>

	<span style="color:#9cdcfe;">data</span> <span style="color:#cccccc;">:</span> <span style="color:#4ec9b0;">bytes</span> <span style="color:#d4d4d4;">=</span> <span style="color:#4ec9b0;">bytes</span><span style="color:#ffd700;">(</span><span style="color:#9cdcfe;">shm</span><span style="color:#cccccc;">.</span><span style="color:#9cdcfe;">buf</span><span style="color:#da70d6;">[</span><span style="color:#cccccc;">:</span><span style="color:#da70d6;">]</span><span style="color:#ffd700;">)</span><span style="color:#cccccc;">.</span><span style="color:#dcdcaa;">rstrip</span><span style="color:#ffd700;">(</span><span style="color:#569cd6;">b</span><span style="color:#ce9178;">'\x00'</span><span style="color:#ffd700;">)</span>

	<span style="color:#dcdcaa;">print</span><span style="color:#ffd700;">(</span><span style="color:#9cdcfe;">data</span><span style="color:#cccccc;">.</span><span style="color:#dcdcaa;">decode</span><span style="color:#da70d6;">(</span><span style="color:#ce9178;">"utf-8"</span><span style="color:#da70d6;">)</span><span style="color:#ffd700;">)</span>

	<span style="color:#9cdcfe;">shm</span><span style="color:#cccccc;">.</span><span style="color:#dcdcaa;">close</span><span style="color:#ffd700;">()</span>

<span style="color:#c586c0;">if</span> <span style="color:#9cdcfe;">__name__</span> <span style="color:#d4d4d4;">==</span> <span style="color:#ce9178;">"__main__"</span><span style="color:#cccccc;">:</span>
	<span style="color:#dcdcaa;">main</span><span style="color:#ffd700;">()</span>
</code></pre>

<pre><code style="font-family:monospace; font-size:12px;">Hello world from Godot Shared Memory!</code></pre>

<h4>
    Write (Python → Godot):
</h4>

<pre><code style="font-family:monospace; font-size:12px;"><span style="color:#6a9955;"># Python Shared Memory Example.</span>
<span style="color:#c586c0;">from</span> <span style="color:#4ec9b0;">multiprocessing</span> <span style="color:#c586c0;">import</span> <span style="color:#4ec9b0;">shared_memory</span>
<span style="color:#c586c0;">import</span> <span style="color:#4ec9b0;">time</span>

<span style="color:#4fc1ff;">NAME</span> <span style="color:#cccccc;">:</span> <span style="color:#4ec9b0;">str</span> <span style="color:#d4d4d4;">=</span> <span style="color:#ce9178;">"SharedMemoryExample"</span>
<span style="color:#4fc1ff;">SIZE</span> <span style="color:#cccccc;">:</span> <span style="color:#4ec9b0;">int</span> <span style="color:#d4d4d4;">=</span> <span style="color:#b5cea8;">1024</span>

<span style="color:#569cd6;">def</span> <span style="color:#dcdcaa;">main</span><span style="color:#ffd700;">()</span> <span style="color:#cccccc;">-></span> <span style="color:#569cd6;">None</span><span style="color:#cccccc;">:</span>
	<span style="color:#9cdcfe;">shm</span> <span style="color:#cccccc;">:</span> <span style="color:#4ec9b0;">shared_memory</span><span style="color:#cccccc;">.</span><span style="color:#4ec9b0;">SharedMemory</span> <span style="color:#d4d4d4;">=</span> <span style="color:#4ec9b0;">shared_memory</span><span style="color:#cccccc;">.</span><span style="color:#4ec9b0;">SharedMemory</span><span style="color:#ffd700;">(</span><span style="color:#9cdcfe;">name</span><span style="color:#d4d4d4;">=</span><span style="color:#4fc1ff;">NAME</span><span style="color:#cccccc;">,</span> <span style="color:#9cdcfe;">create</span><span style="color:#d4d4d4;">=</span><span style="color:#569cd6;">True</span><span style="color:#cccccc;">,</span> <span style="color:#9cdcfe;">size</span><span style="color:#d4d4d4;">=</span><span style="color:#4fc1ff;">SIZE</span><span style="color:#ffd700;">)</span>

	<span style="color:#9cdcfe;">data</span> <span style="color:#cccccc;">:</span> <span style="color:#4ec9b0;">bytes</span> <span style="color:#d4d4d4;">=</span> <span style="color:#569cd6;">b</span><span style="color:#ce9178;">'Hello world from Python Shared Memory!'</span>

	<span style="color:#9cdcfe;">shm</span><span style="color:#cccccc;">.</span><span style="color:#9cdcfe;">buf</span><span style="color:#ffd700;">[</span><span style="color:#b5cea8;">0</span><span style="color:#cccccc;">:</span><span style="color:#dcdcaa;">len</span><span style="color:#da70d6;">(</span><span style="color:#9cdcfe;">data</span><span style="color:#da70d6;">)</span><span style="color:#ffd700;">]</span> <span style="color:#d4d4d4;">=</span> <span style="color:#9cdcfe;">data</span>

	<span style="color:#4ec9b0;">time</span><span style="color:#cccccc;">.</span><span style="color:#dcdcaa;">sleep</span><span style="color:#ffd700;">(</span><span style="color:#b5cea8;">10</span><span style="color:#ffd700;">)</span>

	<span style="color:#9cdcfe;">shm</span><span style="color:#cccccc;">.</span><span style="color:#dcdcaa;">close</span><span style="color:#ffd700;">()</span>
	<span style="color:#9cdcfe;">shm</span><span style="color:#cccccc;">.</span><span style="color:#dcdcaa;">unlink</span><span style="color:#ffd700;">()</span>

<span style="color:#c586c0;">if</span> <span style="color:#9cdcfe;">__name__</span> <span style="color:#d4d4d4;">==</span> <span style="color:#ce9178;">"__main__"</span><span style="color:#cccccc;">:</span>
	<span style="color:#dcdcaa;">main</span><span style="color:#ffd700;">()</span>
</code></pre>

<h4>
    Read (Godot):
</h4>

<pre><code style="font-family:monospace; font-size:12px;"><span style="color:#ffffff80;"># Godot Shared Memory Example.</span>
<span style="color:#ff7085;">extends</span> <span style="color:#8fffdb;">Node</span>

<span style="color:#ff7085;">const</span> <span style="color:#bce0ff;">NAME</span> <span style="color:#abc9ff;">:</span> <span style="color:#42ffc2;">String</span> <span style="color:#abc9ff;">=</span> <span style="color:#ffeda1;">"SharedMemoryExample"</span>
<span style="color:#ff7085;">const</span> <span style="color:#bce0ff;">SIZE</span> <span style="color:#abc9ff;">:</span> <span style="color:#42ffc2;">int</span> <span style="color:#abc9ff;">=</span> <span style="color:#a1ffe0;">1024</span>

<span style="color:#ff7085;">func</span> <span style="color:#66e6ff;">rstrip</span><span style="color:#abc9ff;">(</span><span style="color:#ffffffbf;">buffer</span> <span style="color:#abc9ff;">:</span> <span style="color:#42ffc2;">PackedByteArray</span><span style="color:#abc9ff;">)</span> <span style="color:#abc9ff;">-></span> <span style="color:#42ffc2;">PackedByteArray</span><span style="color:#abc9ff;">:</span>
	<span style="color:#ff7085;">var</span> <span style="color:#ffffffbf;">out</span> <span style="color:#abc9ff;">:</span> <span style="color:#42ffc2;">PackedByteArray</span> <span style="color:#abc9ff;">=</span> <span style="color:#ffffffbf;">buffer</span><span style="color:#abc9ff;">.</span><span style="color:#57b3ff;">duplicate</span><span style="color:#abc9ff;">()</span>
	
	<span style="color:#ff8ccc;">while</span> <span style="color:#ffffffbf;">out</span><span style="color:#abc9ff;">.</span><span style="color:#57b3ff;">size</span><span style="color:#abc9ff;">()</span> <span style="color:#abc9ff;">></span> <span style="color:#a1ffe0;">0</span> <span style="color:#ff7085;">and</span> <span style="color:#ffffffbf;">out</span><span style="color:#abc9ff;">[</span><span style="color:#ffffffbf;">out</span><span style="color:#abc9ff;">.</span><span style="color:#57b3ff;">size</span><span style="color:#abc9ff;">()</span> <span style="color:#abc9ff;">-</span> <span style="color:#a1ffe0;">1</span><span style="color:#abc9ff;">]</span> <span style="color:#abc9ff;">==</span> <span style="color:#a1ffe0;">0</span><span style="color:#abc9ff;">:</span>
		<span style="color:#ffffffbf;">out</span><span style="color:#abc9ff;">.</span><span style="color:#57b3ff;">resize</span><span style="color:#abc9ff;">(</span><span style="color:#ffffffbf;">out</span><span style="color:#abc9ff;">.</span><span style="color:#57b3ff;">size</span><span style="color:#abc9ff;">()</span> <span style="color:#abc9ff;">-</span> <span style="color:#a1ffe0;">1</span><span style="color:#abc9ff;">)</span>
	
	<span style="color:#ff8ccc;">return</span> <span style="color:#ffffffbf;">out</span>

<span style="color:#ff7085;">func</span> <span style="color:#66e6ff;">_ready</span><span style="color:#abc9ff;">()</span> <span style="color:#abc9ff;">-></span> <span style="color:#42ffc2;">void</span><span style="color:#abc9ff;">:</span>
	<span style="color:#ff7085;">var</span> <span style="color:#ffffffbf;">shm</span> <span style="color:#abc9ff;">:</span> <span style="color:#c7ffed;">SharedMemory</span> <span style="color:#abc9ff;">=</span> <span style="color:#c7ffed;">SharedMemory</span><span style="color:#abc9ff;">.</span><span style="color:#57b3ff;">new</span><span style="color:#abc9ff;">()</span>
	
	<span style="color:#ff8ccc;">if</span> <span style="color:#ffffffbf;">shm</span><span style="color:#abc9ff;">.</span><span style="color:#57b3ff;">open</span><span style="color:#abc9ff;">(</span><span style="color:#bce0ff;">NAME</span><span style="color:#abc9ff;">,</span> <span style="color:#bce0ff;">SIZE</span><span style="color:#abc9ff;">)</span> <span style="color:#abc9ff;">==</span> <span style="color:#ffffffbf;">OK</span><span style="color:#abc9ff;">:</span>
		<span style="color:#ff7085;">var</span> <span style="color:#ffffffbf;">data</span> <span style="color:#abc9ff;">:</span> <span style="color:#42ffc2;">PackedByteArray</span> <span style="color:#abc9ff;">=</span> <span style="color:#ffffffbf;">shm</span><span style="color:#abc9ff;">.</span><span style="color:#57b3ff;">read</span><span style="color:#abc9ff;">()</span>
		<span style="color:#ffffffbf;">data</span> <span style="color:#abc9ff;">=</span> <span style="color:#57b3ff;">rstrip</span><span style="color:#abc9ff;">(</span><span style="color:#ffffffbf;">data</span><span style="color:#abc9ff;">)</span>
		<span style="color:#a3a3f5;">print</span><span style="color:#abc9ff;">(</span><span style="color:#ffffffbf;">data</span><span style="color:#abc9ff;">.</span><span style="color:#57b3ff;">get_string_from_utf8</span><span style="color:#abc9ff;">())</span>
	
	<span style="color:#ffffffbf;">shm</span><span style="color:#abc9ff;">.</span><span style="color:#57b3ff;">close</span><span style="color:#abc9ff;">()</span>
</code></pre>

<pre><code style="font-family:monospace; font-size:12px;">Hello world from Python Shared Memory!</code></pre>

<h2>
    Links & Support
</h2>

<ul><li><a href="https://github.com/ElSuicio/Shared-Memory-Godot" target="_blank">Git-Hub</a></li></ul>

<p><br></p>

<p>[ Support Email: <a href="mailto:interdreamsoft@gmail.com">interdreamsoft@gmail.com</a> ]</p>


<pre><code style="font-family:monospace; font-size:14px;">
    Godot:
    <span style="color:#abc9ff;">(), [], {}, *, +, -, /.</span>
    <span style="color:#ff7085;">var, func, extends.</span>
    <span style="color:#ff8ccc;">if, for, return.</span>
    <span style="color:#42ffc2;">Vector3, Vector2, Color.</span>
    <span style="color:#8fffdb;">Object, Mesh, Node.</span>
    <span style="color:#c7ffed;">MyCustomClass.</span>
    <span style="color:#ffffff80;">#This is a comment.</span>
    <span style="color:#99b3cccc;">##This is a documentation comment.</span>
    <span style="color:#ffeda1;">"Text".</span>
    <span style="color:#ffbf66;">"{_}", "\s".</span>
    <span style="color:#ffffffbf;">Text</span>
    <span style="color:#a1ffe0;">1, 2, 3, 4, 5, 6, 7, 8, 9, 0.</span>
    <span style="color:#57b3ff;">self.algun_metodo.</span>
    <span style="color:#bce0ff;">self.alguna_propiedad.</span>
    <span style="color:#66e6ff;">_ready, _process.</span>
    <span style="color:#a3a3f5;">preload, load.</span>
    <span style="color:#ffb373;">@export, @onready.</span>

    Python
    <span style="color:#ffd700;">() [] {}</span>
    <span style="color:#da70d6;">() [] {}</span>
    <span style="color:#179fff;">() [] {}</span>
    <span style="color:#cccccc;">. , :</span>
    <span style="color:#d4d4d4;">/ + - =</span>
    <span style="color:#c586c0;">from import</span>
    <span style="color:#4ec9b0;">types</span>
    <span style="color:#6a9955;">#This is a comment</span>
    <span style="color:#ce9178;">"Text"</span>
    <span style="color:#9cdcfe;">Text</span>
    <span style="color:#b5cea8;">1 2 3 4 5 6 8 9 0</span>
    <span style="color:#dcdcaa;">self.algun_metodo</span>
    <span style="color:#569cd6;">None def</span>
    <span style="color:#4fc1ff;">NAME SIZE</span>
    
    <span style="color:#ff8ccc;"></span>
    <span style="color:#ff8ccc;"></span>
    <span style="color:#ff8ccc;"></span>
    <span style="color:#ff8ccc;"></span>
    <span style="color:#ff8ccc;"></span>
    <span style="color:#ff8ccc;"></span>
    

</code></pre>

<h2>
    Methods
</h2>

<table style="font-size:12px;"><tbody>
    <tr><td>
        <abbr title="No return value.">void</abbr><br>
    </td><td>
        close()
    </td></tr>
    <tr><td>
        <a href="https://docs.godotengine.org/en/stable/classes/class_%40globalscope.html#enum-globalscope-error">Error</a>
    </td><td>
        create(name: <a href="https://docs.godotengine.org/en/stable/classes/class_stringname.html#class-stringname">StringName</a>, size: <a href="https://docs.godotengine.org/en/stable/classes/class_int.html#class-int">int</a>, scope: Scope)
    </td></tr>
    <tr><td>
        <a href="https://docs.godotengine.org/en/stable/classes/class_int.html#class-int">int</a>
    </td><td>
        get_mapped_size() <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr>
    </td></tr>
    <tr><td>
        <a href="https://docs.godotengine.org/en/stable/classes/class_stringname.html#class-stringname">StringName</a>
    </td><td>get_name() <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr>
    </td></tr>
    <tr><td>
        <a href="https://docs.godotengine.org/en/stable/classes/class_int.html#class-int">int</a>
    </td><td>
        get_size() <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr>
    </td></tr>
    <tr><td>
        Status
    </td><td>
        get_status() <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr>
    </td></tr>
    <tr><td>
        <a href="https://docs.godotengine.org/en/stable/classes/class_%40globalscope.html#enum-globalscope-error">Error</a>
    </td><td>
        open(name: <a href="https://docs.godotengine.org/en/stable/classes/class_stringname.html#class-stringname">StringName</a>, size: <a href="https://docs.godotengine.org/en/stable/classes/class_int.html#class-int">int</a> = 0)
    </td></tr>
    <tr><td>
        <a href="https://docs.godotengine.org/en/stable/classes/class_packedbytearray.html#class-packedbytearray">PackedByteArray</a>
    </td><td>
        read(size: <a href="https://docs.godotengine.org/en/stable/classes/class_int.html#class-int">int</a> = 0, offset: <a href="https://docs.godotengine.org/en/stable/classes/class_int.html#class-int">int</a> = 0) <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr>
    </td></tr>
    <tr><td>
        <abbr title="No return value.">void</abbr>
    </td><td>
        unlink()
    </td></tr>
    <tr><td>
        <a href="https://docs.godotengine.org/en/stable/classes/class_%40globalscope.html#enum-globalscope-error">Error</a>
    </td><td>
        write(data: <a href="https://docs.godotengine.org/en/stable/classes/class_packedbytearray.html#class-packedbytearray">PackedByteArray</a>, offset: <a href="https://docs.godotengine.org/en/stable/classes/class_int.html#class-int">int</a> = 0)
    </td></tr>
</tbody></table>

<h2>
    Method Descriptions
</h2>
